<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="528px" preserveAspectRatio="none" style="width:591px;height:528px;background:#FFFFFF;" version="1.1" viewBox="0 0 591 528" width="591px" zoomAndPan="magnify"><defs/><g><ellipse cx="289.8828" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="336.9277" x="121.4189" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="316.9277" x="131.4189" y="71.1387">Get existing encounters for the device or the patient</text><polygon fill="#F1F1F1" points="188.9036,159.6792,390.8621,159.6792,402.8621,171.6792,390.8621,183.6792,188.9036,183.6792,176.9036,171.6792,188.9036,159.6792" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="201.9585" x="188.9036" y="175.4873">Is the existing encounter in progress</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="157.8953" y="169.085">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="402.8621" y="169.085">no</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="112.6836" x="110.5618" y="193.6792"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92.6836" x="120.5618" y="214.8179">Return an error</text><ellipse cx="166.9036" cy="258.6479" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="166.9036" cy="258.6479" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="175.5488" x="325.0876" y="193.6792"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155.5488" x="335.0876" y="214.8179">Delete existing encounter</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="260.8203" x="282.4519" y="247.6479"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="240.8203" x="292.4519" y="268.7866">Notify encounter cancelled to event bus</text><polygon fill="#F1F1F1" points="88.9583,103.9688,490.8074,103.9688,502.8074,115.9688,490.8074,127.9688,88.9583,127.9688,76.9583,115.9688,88.9583,103.9688" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="293.8828" y="138.1792">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="401.8491" x="88.9583" y="119.7769">Is there an encounter that belongs to the patient or device but not both?</text><polygon fill="#F1F1F1" points="143.0049,323.6167,436.7607,323.6167,448.7607,335.6167,436.7607,347.6167,143.0049,347.6167,131.0049,335.6167,143.0049,323.6167" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="293.7559" x="143.0049" y="339.4248">Does an encounter exist for both patient and device?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="111.9966" y="333.0225">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="448.7607" y="333.0225">no</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="220.0098" x="11" y="357.6167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="200.0098" x="21" y="378.7554">Set existing encounter as started</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="190.6484" x="363.4365" y="357.6167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170.6484" x="373.4365" y="378.7554">Create an started encounter</text><polygon fill="#F1F1F1" points="289.8828,397.5854,301.8828,409.5854,289.8828,421.5854,277.8828,409.5854,289.8828,397.5854" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="246.5645" x="166.6006" y="441.5854"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="226.5645" x="176.6006" y="462.7241">Notify encounter started to event bus</text><ellipse cx="289.8828" cy="506.5542" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="289.8828" cy="506.5542" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="30" y2="50"/><polygon fill="#181818" points="285.8828,40,289.8828,50,293.8828,40,289.8828,44" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="166.9036" x2="166.9036" y1="227.6479" y2="247.6479"/><polygon fill="#181818" points="162.9036,237.6479,166.9036,247.6479,170.9036,237.6479,166.9036,241.6479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="412.8621" x2="412.8621" y1="227.6479" y2="247.6479"/><polygon fill="#181818" points="408.8621,237.6479,412.8621,247.6479,416.8621,237.6479,412.8621,241.6479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="176.9036" x2="166.9036" y1="171.6792" y2="171.6792"/><line style="stroke:#181818;stroke-width:1;" x1="166.9036" x2="166.9036" y1="171.6792" y2="193.6792"/><polygon fill="#181818" points="162.9036,183.6792,166.9036,193.6792,170.9036,183.6792,166.9036,187.6792" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="402.8621" x2="412.8621" y1="171.6792" y2="171.6792"/><line style="stroke:#181818;stroke-width:1;" x1="412.8621" x2="412.8621" y1="171.6792" y2="193.6792"/><polygon fill="#181818" points="408.8621,183.6792,412.8621,193.6792,416.8621,183.6792,412.8621,187.6792" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="412.8621" x2="412.8621" y1="281.6167" y2="291.6167"/><line style="stroke:#181818;stroke-width:1;" x1="412.8621" x2="565.2722" y1="291.6167" y2="291.6167"/><polygon fill="#181818" points="561.2722,222.7456,565.2722,212.7456,569.2722,222.7456,565.2722,218.7456" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="565.2722" x2="565.2722" y1="115.9688" y2="291.6167"/><line style="stroke:#181818;stroke-width:1;" x1="565.2722" x2="502.8074" y1="115.9688" y2="115.9688"/><polygon fill="#181818" points="512.8074,111.9688,502.8074,115.9688,512.8074,119.9688,508.8074,115.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="127.9688" y2="159.6792"/><polygon fill="#181818" points="285.8828,149.6792,289.8828,159.6792,293.8828,149.6792,289.8828,153.6792" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="76.9583" x2="64.9583" y1="115.9688" y2="115.9688"/><polygon fill="#181818" points="60.9583,208.7456,64.9583,218.7456,68.9583,208.7456,64.9583,212.7456" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="64.9583" x2="64.9583" y1="115.9688" y2="303.6167"/><line style="stroke:#181818;stroke-width:1;" x1="64.9583" x2="289.8828" y1="303.6167" y2="303.6167"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="303.6167" y2="323.6167"/><polygon fill="#181818" points="285.8828,313.6167,289.8828,323.6167,293.8828,313.6167,289.8828,317.6167" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="83.9688" y2="103.9688"/><polygon fill="#181818" points="285.8828,93.9688,289.8828,103.9688,293.8828,93.9688,289.8828,97.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="131.0049" x2="121.0049" y1="335.6167" y2="335.6167"/><line style="stroke:#181818;stroke-width:1;" x1="121.0049" x2="121.0049" y1="335.6167" y2="357.6167"/><polygon fill="#181818" points="117.0049,347.6167,121.0049,357.6167,125.0049,347.6167,121.0049,351.6167" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="448.7607" x2="458.7607" y1="335.6167" y2="335.6167"/><line style="stroke:#181818;stroke-width:1;" x1="458.7607" x2="458.7607" y1="335.6167" y2="357.6167"/><polygon fill="#181818" points="454.7607,347.6167,458.7607,357.6167,462.7607,347.6167,458.7607,351.6167" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="121.0049" x2="121.0049" y1="391.5854" y2="409.5854"/><line style="stroke:#181818;stroke-width:1;" x1="121.0049" x2="277.8828" y1="409.5854" y2="409.5854"/><polygon fill="#181818" points="267.8828,405.5854,277.8828,409.5854,267.8828,413.5854,271.8828,409.5854" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="458.7607" x2="458.7607" y1="391.5854" y2="409.5854"/><line style="stroke:#181818;stroke-width:1;" x1="458.7607" x2="301.8828" y1="409.5854" y2="409.5854"/><polygon fill="#181818" points="311.8828,405.5854,301.8828,409.5854,311.8828,413.5854,307.8828,409.5854" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="421.5854" y2="441.5854"/><polygon fill="#181818" points="285.8828,431.5854,289.8828,441.5854,293.8828,431.5854,289.8828,435.5854" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="289.8828" x2="289.8828" y1="475.5542" y2="495.5542"/><polygon fill="#181818" points="285.8828,485.5542,289.8828,495.5542,293.8828,485.5542,289.8828,489.5542" style="stroke:#181818;stroke-width:1;"/><!--SRC=[RP51ReGm34NtEOMNmnLWCOkEL7NJHNk201-8X1mKcsddzaq2Cu2A5v4I-pj-tw8sg2dVeOHV9-gu9t3ZPrO4eSu7qW7KukuQq7gRh3gmLkPdS2FeyY7fEO0iR-BuP9LgZ9xxcFTxPMgqjgnd9VQnqEjmBSW9NHwGmb0Crprxdmn7ZcaAlWyGsNIfcBCuHVa5dGFdkKBmeNfbHFsKBnWb4h0lDj4D8_JioqrUVdfrtMCtJMEvmJYYJQYu9yXwbaK1RbrduadPC9EuRXvoz2l_bnrFNhoiib6sU7Kzmoo_JrT7LY9Zt2tQoXmPoxS0gtbPQyMUS9drFz-pz4YNRFm3]--></g></svg>