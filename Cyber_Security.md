<div align="center">
<h1>Central Hub Infrastructure</h1>
<h2> üõ°Ô∏è Cyber Security </h2>
</div>

### Cryptography Algorithm & Protocol That Used in System:

| **Name**                 | **Asset Type**              | **Managed By**                           | **Algorithm & Protocol**                         | **Validity**     |
|--------------------------|-----------------------------|-------------------------------------------|-------------------------------------------------|------------------|
| Postgres Auth Key        | Password                   | Client                                    | AES-CBC with PKCS#7                             | N/A              |
| Postgres Encryption Key  | Symmetric Data Encryption  | Self-generated by software, rotated/revoked by client | AES 256                                         | N/A              |
| Redis Auth Key           | Password                   | Client                                    | AES-CBC with PKCS#7                             | N/A              |
| Kafka User Key           | Password                   | Client                                    | AES-CBC with PKCS#7                             | N/A              |
| Kafka Certificate        | Certificates (x.509)       | Self-generated by software, rotated/revoked by client | X.509 (SHA256 with RSA-4096)                    | 1 year           |
| Microservice JWT Token   | JWT Token                  | Self-managed by software                  | RS256 (SHA256 with RSA-2048)                    | 15 minutes       |
| User Authentication Private Key | Private Authentication Key | Self-generated by software, rotated/revoked by client | RS256 (SHA256 with RSA-2048)                    | N/A              |
| User Authentication Public Key | Public Authentication Key | Self-generated by software, rotated/revoked by client | RS256 (SHA256 with RSA-2048)                    | N/A              |
| Digital Signature Public Key | Public Signature-Verification Key | Sibel Health                              | RSA-4096                                        | N/A              |
| Digital Signature Private Key | Private Signature Key   | Sibel Health                              | RSA-4096                                        | N/A              |
| SDC Certificates         | Certificates (x.509)       | Sibel Health or Client                    | X.509 (SHA256 with RSA-4096)                    | 1 year           |
| Mirth Connect Auth Key   | Password                   | Client                                    | AES-CBC with PKCS#7                             | N/A              |
| TLS/SSL Certificate      | Certificate                | Sibel Health or Client                    | TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256         | 1 year           |
| Django Key               | Secret Key                 | Self-generated by software, rotated/revoked by client | PBKDF2                                          | N/A              |
| Clinical Password        | Password                   | Client                                    | PBKDF2WithHmacSHA256                            | N/A              |
| Admin Dashboard Token    | Password                   | Self-generated by software, rotated/revoked by client | RS256 (SHA256 with RSA-2048)                    | N/A              |
| Monitoring Dashboard Password | Password              | Client                                    | PBKDF2                                          | N/A              |
| ANNE View SDC Certificates | Certificate              | Sibel Health or Client                    | X.509 (SHA256 with RSA-4096)                    | 1 year           |
| Clinical Password        | Password                   | Client                                    | PBKDF2WithHmacSHA256                            | N/A              |
| Admin Password           | Password                   | Client                                    | PBKDF2WithHmacSHA256                            | N/A              |
| Digital Signature Private Key | Private Key           | Sibel Health                              | RSA-2048                                        | 10000 days       |


### 

1. **kubernetes secret**:

- We used secret in our infra to store the sensitive information like password, key, certificate, tokens in a encryption form, which use by the pods or a service to access the credentials or other sensitive data 
  without exposing it in a plain text. By using this we can secured our sensitive data.
- Secret are encrypting data with base64 encryption algorithm.

2. **AES-256 encryption**:

- In our setup, we use the AES-256 encryption algorithm to encrypt the PHI data stored in the database within the Central Hub.
- It is a symmetric encryption algorithm that uses a 256-bit key to securely encrypt and decrypt data. It provides a high level of security with 14 rounds of processing, making it resistant to brute-force attacks. 
  AES-256 is widely used for protecting sensitive information in applications like secure communication and data storage.

3. **JSON Web Tokens (JWT)**:

- In our setup we used JWT for secure data transmission between the Central Hub web portal and backend services. These tokens have a validity of 24 hours, with a 7-day refresh token.
- JWT are compact, URL-safe tokens used for authentication and authorization. They consist of three parts: a header (with token type and algorithm), a payload (containing claims or data), and a signature (to 
  ensure integrity and verify the sender). JWTs are self-contained, stateless, and commonly used to securely transmit user information between clients and servers in modern web applications.

4. **RBAC**:

- We have used Role-Based Access Control (RBAC) in our setup to regulate the access to resources within a Kubernetes cluster. It defines permissions for different users, groups, or service accounts. A 
  ClusterRole defines a set of permissions that apply across the entire cluster, while a ClusterRoleBinding associates a specific ClusterRole with a subject (e.g., a service account, user, or group).
- In our setup we have created the cluster role for the service account "local-path-provisioner-service-account" with multiple rules like one grants read-only access (get, list, watch) to resources like nodes, 
  persistentvolumeclaims, and configmaps; another grants full access (*) to endpoints, persistentvolumes, and pods; a third allows creating and patching events; and the last one grants read-only access to 
  storageclasses from the storage.k8s.io API group.

5. **TLS Cert for Ingres**:

<div align="center">
<img src="https://github.com/user-attachments/assets/c66e038b-cba2-4c05-a575-ed924aa083fc" alt="TLS Dia">
</div>  

- We have used TLS cert for ingres domain because When deploying services in Kubernetes, Ingress resources are often used to expose HTTP and HTTPS routes from outside the cluster to services within it. To 
  secure these connections using HTTPS, a TLS certificate is required.
- TLS is an encryption and authentication protocol designed to secure Internet communications. A TLS handshake is the process that kicks off a communication session that uses TLS. During a TLS handshake, 
  the two communicating sides exchange messages to acknowledge each other, verify each other, establish the cryptographic algorithms they will use, and agree on session keys.

6. **x.509 Certificate**:

<div align="center">
<img src="https://github.com/user-attachments/assets/8ff60f2d-d1ba-4937-899a-d5cce118bf16" alt="x509 dia">
</div>   

- We have used x.509 certificate to encrypt the communication between the central hub and patient monitor and this certificates should be generated with the trusted certificate authority.
- An X.509 certificate is a digital certificate that uses the X.509 public key infrastructure (PKI) standard to verify the ownership of a public key. It is widely used to secure communications over networks 
  such as the internet by enabling authentication, encryption, and data integrity.

7. **ssh keys**:

<div align="center">
<img src="https://github.com/user-attachments/assets/a5b700c0-1b21-498a-9a80-6ff023d0fc6f" alt="ssh diagram">
</div>

- We are using ssh private key to login into different nodes on which we have stored the same public key.
- A SSH key is a cryptographic key used for secure communication between a client and a server over the Secure Shell (SSH) protocol. It is primarily used for authentication and establishing encrypted 
  connections.

### Central Hub Automatic Secret Rotationn

**Problem**:
- We need to be able to rotate multiple kinds of secrets on a different schedule. The secrets will include:
  - Application secret: random strings required by an application for different uses
  - Asymmetric key pairs: used for encryption, signatures and validations
  - Service secrets: used to connect between different services (kafka, redis, postgres, etc)
- Depending on the purpose of the secret the handling of an update to the secret will need to be implemented differently on each application. Ideally the proposed solution should propose a no downtime solution


